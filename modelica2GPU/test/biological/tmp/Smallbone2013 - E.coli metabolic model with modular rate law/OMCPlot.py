
import pandas as pd
import numpy as np
import matplotlib.pyplot as plt
import argparse

parser = argparse.ArgumentParser()
parser.add_argument("-c", "--csv", help="Path relativo o assoluto del file CSV contenente i dati")
args = parser.parse_args()
csv_file = args.csv

# Apriamo e leggiamo il CSV in input
csv_data = pd.read_csv(csv_file)

# Prendiamo i nomi delle species con gli indici corrispettivi che utilizzeremo per il plotting
variables_to_plot = ["s_0003","s_0004","s_0017","s_0018","s_0028","s_0029","s_0032","s_0033","s_0040","s_0041","s_0042","s_0043","s_0044","s_0045","s_0046","s_0047","s_0049","s_0050","s_0051","s_0052","s_0073","s_0075","s_0096","s_0097","s_0098","s_0099","s_0116","s_0119","s_0121","s_0123","s_0128","s_0133","s_0147","s_0148","s_0149","s_0155","s_0160","s_0162","s_0191","s_0193","s_0194","s_0195","s_0201","s_0203","s_0214","s_0217","s_0218","s_0226","s_0229","s_0231","s_0232","s_0233","s_0237","s_0252","s_0255","s_0262","s_0263","s_0265","s_0266","s_0267","s_0269","s_0270","s_0271","s_0272","s_0276","s_0277","s_0282","s_0283","s_0289","s_0290","s_0293","s_0295","s_0297","s_0299","s_0303","s_0304","s_0305","s_0306","s_0307","s_0308","s_0310","s_0311","s_0312","s_0313","s_0316","s_0318","s_0325","s_0328","s_0330","s_0331","s_0332","s_0333","s_0334","s_0335","s_0336","s_0337","s_0341","s_0342","s_0343","s_0344","s_0345","s_0346","s_0347","s_0352","s_0354","s_0359","s_0360","s_0361","s_0362","s_0364","s_0367","s_0368","s_0369","s_0370","s_0371","s_0372","s_0376","s_0377","s_0378","s_0380","s_0381","s_0384","s_0391","s_0393","s_0395","s_0397","s_0405","s_0408","s_0411","s_0412","s_0420","s_0421","s_0435","s_0445","s_0446","s_0451","s_0453","s_0454","s_0457","s_0467","s_0470","s_0474","s_0476","s_0479","s_0480","s_0481","s_0488","s_0493","s_0497","s_0499","s_0502","s_0510","s_0512","s_0513","s_0520","s_0522","s_0526","s_0530","s_0533","s_0536","s_0539","s_0542","s_0543","s_0545","s_0546","s_0548","s_0555","s_0565","s_0574","s_0575","s_0579","s_0581","s_0585","s_0599","s_0600","s_0603","s_0611","s_0620","s_0621","s_0622","s_0627","s_0653","s_0654","s_0657","s_0659","s_0663","s_0671","s_0675","s_0704","s_0721","s_0726","s_0731","s_0732","s_0737","s_0738","s_0754","s_0755","s_0760","s_0765","s_0766","s_0767","s_0768","s_0772","s_0779","s_0783","s_0785","s_0789","s_0790","s_0795","s_0802","s_0805","s_0807","s_0810","s_0812","s_0813","s_0826","s_0838","s_0840","s_0841","s_0843","s_0859","s_0860","s_0861","s_0862","s_0863","s_0867","s_0875","s_0896","s_0903","s_0910","s_0913","s_0920","s_0929","s_0936","s_0937","s_0941","s_0942","s_0945","s_0971","s_0976","s_0979","s_0984","s_0991","s_0994","s_0998","s_1005","s_1006","s_1009","s_1017","s_1018","s_1019","s_1020","s_1021","s_1022","s_1027","s_1028","s_1033","s_1038","s_1040","s_1041","s_1061","s_1068","s_1072","s_1075","s_1081","s_1082","s_1083","s_1095","s_1098","s_1099","s_1100","s_1101","s_1105","s_1106","s_1109","s_1110","s_1112","s_1113","s_1119","s_1127","s_1131","s_1138","s_1141","s_1151","s_1155","s_1170","s_1179","s_1185","s_1189","s_1193","s_1204","s_1211","s_1212","s_1214","s_1216","s_1217","s_1218","s_1239","s_1240","s_1242","s_1248","s_1250","s_1255","s_1257","s_1258","s_1259","s_1260","s_1261","s_1263","s_1264","s_1265","s_1274","s_1277","s_1278","s_1287","s_1302","s_1303","s_1304","s_1312","s_1315","s_1316","s_1318","s_1321","s_1322","s_1327","s_1329","s_1331","s_1333","s_1334","s_1335","s_1336","s_1340","s_1358","s_1362","s_1363","s_1364","s_1367","s_1372","s_1374","s_1390","s_1391","s_1394","s_1397","s_1399","s_1406","s_1407","s_1411","s_1412","s_1413","s_1429","s_1430","s_1432","s_1435","s_1437","s_1476","s_1477","s_1484","s_1491","s_1492","s_1493","s_1494","s_1496","s_1497","s_1508","s_1511","s_1512","s_1522","s_1530","s_1531","s_1537","s_1544","s_1546","s_1550","s_1551","s_1552","s_1558","s_1561","s_1571","s_1574","s_1577","s_1578","s_1595","s_1599","s_1609","s_1611","s_1612","s_1632","s_1643","s_1644","s_1668","s_1670","s_1672","s_1674","s_1676","s_1680","s_1690","s_1719","s_1725","s_1731","s_1732","s_1733","s_1734","s_1735","s_1736","s_1742","s_1745","s_1750","s_1751","s_1752","s_1754","s_1755","s_1762","s_1765","s_1768","s_1776","s_1777","s_1791","s_1792","s_1799","s_1804","s_1806","s_1807","s_1835","s_2072","s_2093","e_0001","e_0002","e_0003","e_0005","e_0006","e_0008","e_0010","e_0012","e_0020","e_0022","e_0030","e_0031","e_0032","e_0033","e_0034","e_0035","e_0036","e_0037","e_0038","e_0039","e_0040","e_0041","e_0042","e_0043","e_0044","e_0045","e_0046","e_0048","e_0051","e_0052","e_0053","e_0054","e_0060","e_0061","e_0062","e_0063","e_0064","e_0065","e_0071","e_0074","e_0076","e_0077","e_0078","e_0079","e_0080","e_0081","e_0082","e_0083","e_0084","e_0085","e_0094","e_0099","e_0100","e_0103","e_0110","e_0116","e_0125","e_0134","e_0135","e_0137","e_0138","e_0139","e_0144","e_0145","e_0146","e_0149","e_0150","e_0151","e_0152","e_0162","e_0167","e_0168","e_0175","e_0177","e_0183","e_0184","e_0185","e_0186","e_0188","e_0221","e_0223","e_0225","e_0238","e_0246","e_0253","e_0254","e_0260","e_0263","e_0264","e_0273","e_0274","e_0275","e_0276","e_0277","e_0278","e_0279","e_0280","e_0281","e_0282","e_0291","e_0292","e_0300","e_0313","e_0318","e_0323","e_0324","e_0326","e_0327","e_0328","e_0330","e_0331","e_0332","e_0342","e_0368","e_0372","e_0373","e_0374","e_0375","e_0376","e_0377","e_0378","e_0389","e_0391","e_0395","e_0403","e_0404","e_0405","e_0406","e_0416","e_0425","e_0426","e_0427","e_0428","e_0429","e_0431","e_0432","e_0433","e_0435","e_0436","e_0439","e_0451","e_0466","e_0514","e_0515","e_0516","e_0519","e_0531","e_0540","e_0541","e_0544","e_0554","e_0559","e_0561","e_0567","e_0572","e_0577","e_0578","e_0579","e_0580","e_0586","e_0605","e_0606","e_0607","e_0608","e_0609","e_0610","e_0611","e_0612","e_0641","e_0657","e_0682","e_0691","e_0717","e_0719","e_0720","e_0727","e_0728","e_0729","e_0730","e_0731","e_0732","e_0734","e_0735","e_0736","e_0742","e_0743","e_0746","e_0750","e_0757","e_0765","e_0768","e_0770","e_0771","e_0774","e_0775","e_0776","e_0791","e_0793","e_0795","e_0796","e_0798","e_0799","e_0803","e_0804","e_0805","e_0813","e_0815","e_0818","e_0819","e_0821","e_0822","e_0823","e_0825","e_0826","e_0827","e_0828","e_0839","e_0848","e_0866","e_0867","e_0868","e_0869","e_0870","e_0871","e_0872","e_0873","e_0875","e_0876","e_0893","e_0894","e_0896","e_0897","e_0903","e_0911","e_0918","e_0919","e_0925","e_0926","e_0928","e_0931","e_0941","e_0951","e_0953","e_0960","e_0962","e_0964","e_0974","e_0975","e_0977","e_0978","e_0979","e_0986","e_0987","e_0988","e_0990","e_0991","e_0993","e_0994","e_1004","e_1005","e_1006","e_1010","e_1014","e_1015","e_1019","e_1023","e_1026","e_1027","e_1028","e_1029","e_1034","e_1045","e_1086","e_1105","e_1106","e_1108","e_1109","e_1110","e_1125","e_1126","e_1127","e_1128","e_1129","e_1130","e_1136","e_1137","e_1141","e_1149","e_1150","e_1160","e_1167","e_1168","e_1169","e_1170","e_1172","e_1184","e_1185","e_1186","e_1188","e_1189","e_1196","e_1200","e_1201","e_1202","e_1203","e_1205","e_1206","e_1207","e_1210","e_1226","e_1227","e_1232","e_1233","e_1234","e_1238","e_1239","e_1240","e_1241","e_1242","e_1243","e_1244","e_1247","e_1248","e_1249","e_1250","e_1251","e_1252","e_1253","e_1254","e_1256","e_1257","e_1258","e_1259","e_1262","e_1263","e_1264","e_1271","e_1272","e_1273","e_1275","e_1276","e_1277","e_1291","e_1298","e_1312","e_1313","e_1315","e_1326","e_1334","e_1335","e_1339","e_1340","e_1341","e_1355","e_1366","e_1367","e_1369","e_1373","e_1374","e_1376","e_1377"]
species_tuple = [(idx, specie) for idx, specie in enumerate(csv_data.head(0)) if specie in variables_to_plot and specie != "time"]

# Creiamo un array numpy per salvare i dati estrapolati dal CSV
data_numpy = np.array(csv_data)

# Prendiamo la colonna del tempo
time = data_numpy[:, 0]

# Prendiamo i valori a tuple di quattro i quali formeranno un singolo plot
plot_number = 1
for i in range(0, len(species_tuple), 4):
    current_vars = species_tuple[i:i+4]
    plt.figure(figsize=[15.0, 8.0])
    for j, var in current_vars:
        plt.plot(time, data_numpy[:, j], marker="_", label=var)
    plt.xlabel("Time")
    plt.legend(loc="upper left")
    plt.savefig("OMCPlot" + str(plot_number) + ".png")
    plot_number += 1
    plt.close()
